FROM mcr.microsoft.com/dotnet/sdk:7.0

ARG SDK_GITHUB_SHA
ENV SDK_GITHUB_SHA $SDK_GITHUB_SHA

ARG SDKS_TO_TEST
ENV SDKS_TO_TEST $SDKS_TO_TEST

ARG DOTNET_LOCAL_SDK_VERSION
ENV DOTNET_LOCAL_SDK_VERSION $DOTNET_LOCAL_SDK_VERSION

ARG DOTNET_CLOUD_SDK_VERSION
ENV DOTNET_CLOUD_SDK_VERSION $DOTNET_CLOUD_SDK_VERSION

COPY . /src
WORKDIR /src
RUN ./install.sh
RUN dotnet build "dotnet.csproj"

ENTRYPOINT ["dotnet", "run"]

